<div class="container">
  <h1 class="header">Register</h1>
  <div
    class="alert alert-success"
    role="alert"
    *ngIf="success"
  >Your Acccount has been successfully created. Check your email address to confirm your account.</div>
  <div class="row-cols-lg-auto">
    <div class="col-md-5">
      <form [formGroup]="registerForm">
        <mat-form-field appearance="outline" floatLabel="always">
          <mat-label>First Name</mat-label>
          <input
            matInput
            type="text"
            formControlName="firstname"
            maxlength="30"
            placeholder="John"
            required
          />
          <div
            *ngIf="
              firstname?.invalid &&
              firstname?.touched &&
              firstname?.hasError('required')
            "
          >
            First Name is required
          </div>
        </mat-form-field>

        <mat-form-field appearance="outline" floatLabel="always">
          <mat-label>Last Name</mat-label>
          <input
            matInput
            type="text"
            formControlName="lastname"
            maxlength="30"
            placeholder="Doe"
            required
          />
          <div
            *ngIf="
              lastname?.invalid &&
              lastname?.touched &&
              lastname?.hasError('required')
            "
          >
            Last Name is required
          </div>
        </mat-form-field>

        <mat-form-field appearance="outline" floatLabel="always">
          <mat-label>Email</mat-label>
          <input
            matInput
            type="email"
            formControlName="email"
            maxlength="30"
            placeholder="johndoe@gmail.com"
            required
          />
          <div *ngIf="email?.invalid && email?.touched">
            <div *ngIf="email?.hasError('required')">Email is required</div>
            <div *ngIf="email?.hasError('email')">Email is invalid</div>
          </div>
        </mat-form-field>

        <div formGroupName="passwords">
          <mat-form-field appearance="outline" floatLabel="always">
            <mat-label>Password</mat-label>
            <input
              matInput
              type="password"
              formControlName="password"
              maxlength="30"
              minlength="8"
              required
            />
            <div *ngIf="password?.invalid && password?.touched">
              <div *ngIf="password?.hasError('required')">Password is required</div>
              <div *ngIf="password?.hasError('minlength')">
                Password cannot be less than 8 characters
              </div>
            </div>
          </mat-form-field>

          <mat-form-field appearance="outline" floatLabel="always">
            <mat-label>Confirm Password</mat-label>
            <input
              matInput
              type="password"
              formControlName="confPassword"
              maxlength="30"
              minlength="8"
              required
            />
            <div *ngIf="confPassword?.invalid && confPassword?.touched">
              <div *ngIf="confPassword?.hasError('required')">
                Confirm Password is required
              </div>
            </div>
          </mat-form-field>
          <div *ngIf="password?.touched && passwords?.hasError('confPass')">
            Your passwords do not match
          </div>
        </div>

        <mat-form-field appearance="outline" floatLabel="always">
          <mat-label>Phone Number</mat-label>
          <input
            matInput
            type="text"
            formControlName="phonenumber"
            maxlength="30"
            minlength="10"
            required
            placeholder="+40710222333"
          />
          <div
            *ngIf="
              phonenumber?.invalid &&
              phonenumber?.touched &&
              phonenumber?.hasError('required')
            "
          >
            Phone Number is required
          </div>
          <div *ngIf="phonenumber?.hasError('invalidPhone')">Invalid Phone Number</div>
        </mat-form-field>

      </form>
    </div>
    <div class="col-12">
      <button type="submit" mat-raised-button color="primary" (click)="submit()">
        Submit
      </button>
    </div>
  </div>
</div>
